<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plano Pruebas</title>
    <style>
        /* Estilos para el header y la barra de navegación */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        header {
            background-color: #333;
            color: #fff;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        nav ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #333;
        }

        nav li {
            float: left;
        }

        nav li a {
            display: block;
            color: white;
            text-align: center;
            padding: 14px 16px;
            text-decoration: none;
            border-radius: 5px;
            transition: background-color 0.5s ease;
        }

        nav li a:hover {
            background-color: #ddd;
            color: #333;
        }

        .content {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            flex-direction: column;
        }

        .image-container {
            position: relative;
            max-width: 100%;
            max-height: 100%;
        }
        .register-button {
            text-decoration: none;
            font-weight: bold;
            position: absolute;
            top: 10px;
            right: 45%;
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            z-index: 2;
            margin-top: 20px;
        }

        .register-button:hover {
            background-color: green;
            color: #333;
            transition: background-color 0.5s ease;
        }

        area {
            cursor: pointer;
        }

        area:hover {
            opacity: 0.5;
            color: #333;
        }


        .area-overlay {
            position: absolute;
            background-color: rgba(255, 0, 0,0.5);
            pointer-events: none;/* Red color with opacity */
            /* You'll set the size and position using JavaScript */
        }

        .area-overlay2 {
            position: absolute;
            background-color: rgba(255, 234, 0, 0.5);
            pointer-events: none;/* Red color with opacity */
            /* You'll set the size and position using JavaScript */
        }
    </style>


</head>
<body>
<header>
    <h1>Plano Pruebas</h1>
    <nav>
        <ul>
            <!-- Modificación en el enlace del header -->
            <li><a th:href="@{/inici}">Inicio</a></li>
        </ul>
    </nav>
</header>

<div class="content">
    <!-- Botón "Registrar Dispositivo" -->
    <a th:if="${Rol.getNom().equals('admin') || Rol.getNom().equals('tecnico')}" th:href="${'/consultes'}" class="register-button">Registrar Consulta</a>

    <div class="image-container">

        <img src="https://www.edrawsoft.com/template/hospital-floor-plan.png" alt="" usemap="#map1702657057842"
             width="150%" id="mapImage">
        <map id="map1702657057842" name="map1702657057842">
            <area shape="rect" id="consulta1" coords="19.5,67.5,88.5,115.5" title="" alt="" th:href="@{/consulta/1}"
                  target="_self">
            <area shape="rect" id="consulta2" coords="19.5,115.5,90,169.5" title="" alt="" th:href="@{/consulta/2}"
                  target="_self">
            <area shape="rect" id="consulta3" coords="22.5,171,90,213" title="" alt="" th:href="@{/consulta/3}"
                  target="_self">
            <area shape="rect" id="consulta9" coords="19.5,250.5,90,289.5" title="" alt="" th:href="@{/consulta/9}"
                  target="_self">
            <area shape="rect" id="consulta10" coords="21,289.5,90,327" title="" alt="" th:href="@{/consulta/10}"  target="_self">
            <area shape="rect" id="consulta11" coords="22.5,324,87,361.5" title="" alt="" th:href="@{/consulta/11}"
                  target="_self">
            <area shape="rect" id="consulta8" coords="129,271.5,202.5,319.5" title="" alt="" th:href="@{/consulta/8}"
                  target="_self">
            <area shape="rect" id="consulta7" coords="130.5,219,202.5,267" title="" alt="" th:href="@{/consulta/7}"
                  target="_self">
            <area shape="rect" id="consulta6" coords="130.5,166.5,202.5,205.5" title="" alt="" th:href="@{/consulta/6}"
                  target="_self">
            <area shape="rect" id="consulta5" coords="133.5,121.5,202.5,163.5" title="" alt="" th:href="@{/consulta/5}"
                  target="_self">
            <area shape="rect" id="consulta4" coords="132,64.5,198,111" title="" alt="" th:href="@{/consulta/4}" target="_self">
            <area shape="rect" id="consulta12" coords="690,97.5,744,142.5" title="" alt="" th:href="@{/consulta/12}"
                  target="_self">
            <area shape="rect" id="consulta13" coords="787.5,139.5,862.5,189" title="" alt="" th:href="@{/consulta/13}"
                  target="_self">
            <area shape="rect" id="consulta14" coords="684,148.5,742.5,202.5" title="" alt="" th:href="@{/consulta/14}"
                  target="_self">
            <area shape="rect" id="consulta16" coords="682.5,205.5,742.5,270" title="" alt="" th:href="@{/consulta/16}"
                  target="_self">
            <area shape="rect" id="consulta15" coords="787.5,193.5,862.5,243" title="" alt="" th:href="@{/consulta/15}"
                  target="_self">
            <area shape="rect" id="consulta17" coords="786,244.5,865.5,297" title="" alt="" th:href="@{/consulta/17}"
                  target="_self">
            <area shape="rect" id="consulta19" coords="787.5,297,868.5,348" title="" alt="" th:href="@{/consulta/19}"
                  target="_self">
            <area shape="rect" id="consulta21" coords="787.5,351,870,402" title="" alt="" th:href="@{/consulta/21}"
                  target="_self">
            <area shape="rect" id="consulta22" coords="787.5,403.5,866.5,459" title="" alt="" th:href="@{/consulta/22}"
                  target="_self">
            <area shape="rect" id="consulta23" coords="788.5,459,843,540" title="" alt="" th:href="@{/consulta/23}" target="_self">
            <area shape="rect" id="consulta24" coords="684,453,717,486" title="" alt="" th:href="@{/consulta/24}" target="_self">
            <area shape="rect" id="consulta25" coords="682.5,495,720,540" title="" alt="" th:href="@{/consulta/25}"
                  target="_self">
            <area shape="rect" id="consulta20 "coords="684,318,735,441" title="" alt="" th:href="@{/consulta/20}" target="_self">
            <area shape="rect" id="consulta18" coords="688.5,264,732,396" title="" alt="" th:href="@{/consulta/18}" target="_self">
            <area shape="rect" id="consulta26" coords="240,375,274.5,412.5" title="" alt="" th:href="@{/consulta/26}" target="_self">
            <area shape="rect" id="consulta27" coords="282,375,316.5,412.5" title="" alt="" th:href="@{/consulta/27}" target="_self">
            <area shape="rect" id="consulta28" coords="327,373.5,366,412.5" title="" alt="" th:href="@{/consulta/28}" target="_self">
            <area shape="rect" id="consulta29" coords="369,369,406.5,412.5" title="" alt="" th:href="@{/consulta/29}" target="_self">
            <area shape="rect" id="consulta30" coords="417,373.5,458.5,412.5" title="" alt="" th:href="@{/consulta/30}" target="_self">
            <area shape="rect" id="consulta31" coords="474,375,513,412.5" title="" alt="" th:href="@{/consulta/31}" target="_self">
            <area shape="rect" id="consulta32" coords="531,375,570,412.5" title="" alt="" th:href="@{/consulta/32}" target="_self">
            <area shape="rect" id="consulta33" coords="570,375,609,412.5" title="" alt="" th:href="@{/consulta/33}" target="_self">
            <area shape="rect" id="consulta34" coords="576,285,624,336" title="" alt="" th:href="@{/consulta/34}"
                  target="_self">
            <area shape="rect" id="consulta35" coords="522,286.5,567,332.5" title="" alt="" th:href="@{/consulta/35}"
                  target="_self">
            <area shape="rect" id="consulta36" coords="468,285,513,332.5" title="" alt="" th:href="@{/consulta/36}"
                  target="_self">
            <area shape="rect" id="consulta37" coords="414,286.5,459,332.5" title="" alt="" th:href="@{/consulta/37}"
                  target="_self">
            <area shape="rect" id="consulta38" coords="360,285,405,332.5" title="" alt="" th:href="@{/consulta/38}"
                  target="_self">
            <area shape="rect" id="consulta39" coords="273,286.5,315,315" title="" alt="" th:href="@{/consulta/39}"
                  target="_self">
            <area shape="rect" id="consulta40" coords="324,286.5,366,327" title="" alt="" th:href="@{/consulta/40}"
                  target="_self">
        </map><!-- Overlay para estilos y posicionamiento -->
    </div>

    <!-- Botón "Registrar Dispositivo" -->
</div>
<div class="content">
    <input type="hidden" id="consultaIds" th:value="${consultesIncidencies}" />
    <input type="hidden" id="consultaIds2" th:value="${consultesIncidencies2}" />
</div>

<script>

    function positionOverlay(areaElement, overlayElement) {
        const coords = areaElement.coords.split(',').map(num => parseInt(num, 10));
        if (coords.length === 4) { // Rectangular area
            // Assuming coords are in pixels
            overlayElement.style.left = `${coords[0]}px`;
            overlayElement.style.top = `${coords[1]}px`;
            overlayElement.style.width = `${coords[2] - coords[0]}px`;
            overlayElement.style.height = `${coords[3] - coords[1]}px`;
        }
        // Add cases for other shapes (circle, poly) if needed
    }
    const consultaIdsValue = document.getElementById('consultaIds').value;
    const consultaIds = JSON.parse(consultaIdsValue);

    const consultaIds2Value = document.getElementById('consultaIds2').value;
    const consultaIds2 = JSON.parse(consultaIds2Value);
    // Adjusting this for all areas
    document.querySelectorAll('area').forEach((area) => {
        // Obten el ID numérico del área
        const areaId = parseInt(area.id.replace('consulta', ''), 10);

        // Verifica si el ID del área está en la lista de IDs de consulta
        if (consultaIds.includes(areaId)) {
            const overlay = document.createElement('div');
            overlay.className = 'area-overlay';
            // Puedes agregar información adicional al overlay si es necesario
            document.querySelector('.image-container').appendChild(overlay);
            positionOverlay(area, overlay);
        } else if (consultaIds2.includes(areaId)) {
            const overlay2 = document.createElement('div');
            overlay2.className = 'area-overlay2';
            // Puedes agregar información adicional al overlay si es necesario
            document.querySelector('.image-container').appendChild(overlay2);
            positionOverlay(area, overlay2);
        }
    });
</script>
</body>
</html>